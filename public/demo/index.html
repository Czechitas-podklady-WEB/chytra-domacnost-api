<!DOCTYPE html>
<html lang="cs">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Demo | Chytrá domácnost</title>
		<meta name="color-scheme" content="light dark" />
		<link rel="stylesheet" href="../style.css" />
	</head>
	<body>
		<h1>Demo</h1>
		<input type="color" />
		<script>
			;(async () => {
				const response = await fetch('/api/things')
				const data = await response.json()
				const rgbLight = data.things.find((thing) => thing.type === 'rgbLight')
				const input = document.querySelector('input')
				input.addEventListener('change', () => {
					if (input.value.length === 7) {
						fetch(rgbLight.url, {
							method: 'POST',
							body: JSON.stringify({
								color: input.value,
							}),
						})
					}
				})
			})()
		</script>
	</body>
</html>
